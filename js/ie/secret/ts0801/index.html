<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/png" href="../../../../images/favicon.png" />
    
    <title>TS0801 | Owen Jow</title>
    
    <!-- Stylesheets -->
    <link rel="stylesheet" href="../secret.css" />
</head>
<body>
    <h1>TS0801</h1>
    <h2>Only the real TS0801 would know the answers to all of these questions.</h2>
    <p>
        <h3><u>The passphrase</u></h3>
        An ordered concatenation of answers to the questions below (<b>all lowercase, with spaces removed</b>).<br>
        For example, if the answers were <b>Garcia</b>, <b>Calvin and Hobbes</b> and <b>Monopoly</b>, the passphrase would be <b>garciacalvinandhobbesmonopoly</b>.
        <ol>
            <li>Questions coming soon.</li>
        </ol>
        
        <h3><u>Decryption</u></h3>
        <input type="password" name="passphrase" id="pp_input" size="41" maxlength="40" /><br>
        <b>Current passphrase</b>: <span id="passphrase"></span><br><br>
        <b>Encrypted text</b>: <span id="encrypted"></span><br>
        <b>Decrypted text</b>: <span id="decrypted">N/A</span>
    </p>
    
    <!-- Scripts -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://crypto-js.googlecode.com/svn/tags/3.1.2/build/rollups/aes.js"></script>
    <script>
        encrypted = 'U2FsdGVkX1/lvIGTMUT2yMrH3r/YRnZ/PGHVHXloIvvVvJg/6VvdTyNiTxOeXQsHCTxvlC+7jd0L84YPymteuw==';
        cipherParams = CryptoJS.lib.CipherParams.create({
            ciphertext: CryptoJS.enc.Hex.parse(encrypted)         
        });
        $('#encrypted').text(encrypted);
        
        // Random decryptions for output display
        var randomDecryptions = [
            "ÖVï§Ì!oÁºÐ%`f{ÕÈjûÜ_Hã¥qÊu µ¶D\eF2[",
            "¥°¯,C<Ù10ÜÙtegÈçeZæÚ#=ÛbÁ ÖÇdûñðÎy²4¼(\2q`¬M«B$Ñ",
            "] k9¥J^õÐÊb¸Õu¿>#åCqÇ,ÓðK",
            "åjI{rC",
            "¿II,¼Ôô¾èÄó0ÜI®&aÔþIId£$5È/ÿÔ¦a¢³¥Ï",
            "6ÙxNÑ±Á4zO½ÎüZCL¾Ö«^à§©7d(CM!<oFK<",
            "évSDöîûùÆGr}8àæ{I¿q$sù@TÉ5¹0",
            "D_À^ñ7Öî«áö0ûN¯ Nô EC	Èû7VæómuÊ*ºÁ» û>"
        ];
        var numDecryptions = randomDecryptions.length;
        
        var prevPassphrase = "";
        ppInput = document.getElementById('pp_input');
        ppInput.onkeyup=function(){
            var passphrase = ppInput.value;
            
            if (passphrase !== prevPassphrase) {
                // Don't change the decryption output for no reason
                prevPassphrase = passphrase;
                $('#passphrase').text(passphrase);
            
                var decrypted = CryptoJS.AES.decrypt(encrypted, passphrase).toString(CryptoJS.enc.Latin1);
                if (decrypted) {
                    $('#decrypted').text(decrypted);
                } else {
                    $('#decrypted').text(randomDecryptions[Math.floor(Math.random() * numDecryptions)]);
                }
            }
        };
        ppInput.select();
    </script>
</body>
</html>
